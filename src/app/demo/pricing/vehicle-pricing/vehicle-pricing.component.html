<div> <h1 style="text-align: center;">VEHICLE PRICING </h1></div>
<div *ngIf="successMessage" class="alert alert-success">
{{successMessage}}
</div>
<div class="mt-4">
  <form [formGroup]="vehiclePriceForm" (ngSubmit)="addVehiclePrice()">
   
    <div class="mb-3">
        <label class="form-label">Country</label>
        <select name="selectedCountry"  formControlName="country" class="form-control" required  (change)="onCountryChange()">
            <option value="" disabled selected>Select a Country</option>
            <option *ngFor="let country of countryList" [value]="country">
                {{ country }}
              </option> 
        </select>
      </div>
      <div *ngIf="vehiclePriceForm.get('country').hasError('required') && vehiclePriceForm.get('country').touched">
        <small class="text-danger">Country is Required</small>
    </div>

      <div class="mb-3">
        <label class="form-label">City</label>
        <select name="selectedCity" class="form-control"  formControlName="city" required (change)="onCityChange()">
            <option value="" disabled selected>Select a City</option>
            <option *ngFor="let city of cityList" [value]="city.city">
                {{ city.city }}
              </option> 
        </select>
      </div>
      <div *ngIf="vehiclePriceForm.get('city').hasError('required') && vehiclePriceForm.get('city').touched">
        <small class="text-danger">City is Required</small>
    </div>
    
    <div class="mb-3">
      <label class="form-label">Type</label>
      <select name="selectedType" formControlName="type" class="form-control"  (change)="onTypeChange()" required>
        <option value="" disabled selected>Select a Type</option>
        <option *ngFor="let type of newTypesList" [value]="type">
          {{ type }}
        </option>
      </select>
    </div>
    
      <div *ngIf="vehiclePriceForm.get('type').hasError('required') && vehiclePriceForm.get('type').touched">
        <small class="text-danger">Type is Required</small>
    </div>

    <div class="mb-3">
        <b><label for="dProfit" class="form-label">Driver Profit</label></b>
        <input type="text" class="form-control" id="dProfit"  formControlName="dProfit" required >
        <div *ngIf="vehiclePriceForm.get('dProfit').hasError('required') && vehiclePriceForm.get('dProfit').touched">
            <small class="text-danger">Driver Profit is Required</small>
          </div>
    </div>
    
    <div class="mb-3">
        <b><label for="mFare" class="form-label">Minimum Fare</label></b>
        <input type="text" class="form-control" id="mFare" formControlName="mFare" required>
        <div *ngIf="vehiclePriceForm.get('mFare').hasError('required') && vehiclePriceForm.get('mFare').touched">
            <small class="text-danger">Minimum Fare is Required</small>
        </div>
    </div>

    <div class="mb-3">
        <b><label for="distPrice" class="form-label">Distance for Base Price</label></b>
        <input type="number" class="form-control" id="distPrice" formControlName="distPrice" required >
        <div *ngIf="vehiclePriceForm.get('distPrice').hasError('required') && vehiclePriceForm.get('distPrice').touched">
            <small class="text-danger">Dsiatnce for Base Price is Required</small>
        </div>
    </div>

    <div class="mb-3">
        <b><label for="basePrice" class="form-label">Base Price</label></b>
        <input type="text" class="form-control" id="basePrice" formControlName="basePrice" required >
        <div *ngIf="vehiclePriceForm.get('basePrice').hasError('required') && vehiclePriceForm.get('basePrice').touched">
            <small class="text-danger">Base Price is Required</small>
        </div>
    </div>

    <div class="mb-3">
        <b><label for="ppUnitDist" class="form-label">Price per Unit Distance</label></b>
        <input type="text" class="form-control" id="ppUnitDist" formControlName="ppUnitDist" required >
        <div *ngIf="vehiclePriceForm.get('ppUnitDist').hasError('required') && vehiclePriceForm.get('ppUnitDist').touched">
            <small class="text-danger">Price per Unit Distance is Required</small>
        </div>
    </div>

    <div class="mb-3">
        <b><label for="ppUnitTime" class="form-label">Price per Unit Time (min)</label></b>
        <input type="text" class="form-control" id="ppUnitTime" formControlName="ppUnitTime" required >
        <div *ngIf="vehiclePriceForm.get('ppUnitTime').hasError('required') && vehiclePriceForm.get('ppUnitTime').touched">
            <small class="text-danger">Price per Unit Time is Required</small>
        </div>
    </div>

    <div class="mb-3">
        <b><label for="maxSpace" class="form-label">Max Space</label></b>
        <input type="text" class="form-control" id="maxSpace" formControlName="maxSpace" required>
        <div *ngIf="vehiclePriceForm.get('maxSpace').hasError('required') && vehiclePriceForm.get('maxSpace').touched">
            <small class="text-danger">Max Space is Required</small>
        </div>
    </div>
    <div class="mb-3" >
        <button type="submit" class="btn btn-success" [disabled]="vehiclePriceForm.invalid">
            Add
          </button>
  </div>
  </form>

  <div class="mt-3">
        <h2 style="text-align: center;">Vehicle Pricing List</h2>
        <table class="table table-hover">
          <caption></caption>
            <tr>
                <th>Country</th>
                <th>City</th>
                <th>Type</th>
                <th>Driver Profit</th>
                <th>Max Space</th>
            </tr>
            <tr *ngFor="let vehicle of vehiclePriceList">
              <td>{{ vehicle.country }}</td>
              <td>{{ vehicle.city }}</td>
              <td>{{ vehicle.type }}</td>
              <td>{{ vehicle.dProfit }}</td>
              <td>{{ vehicle.maxSpace }}</td>
            </tr>
          </table>
  </div>
</div>